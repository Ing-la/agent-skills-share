---
name: content-to-knowledge-base
description: 将用户本地待整理内容（粘贴或文件）按知识库规范转换，生成可沉淀的 Markdown，并建议保存路径。适用于任意知识库的构建。Use when user mentions @content-to-knowledge-base, @知识库转换, or requests to transform content for knowledge base.
---

# 内容转知识库 (content-to-knowledge-base)

将待整理内容转换为符合知识库规范的 Markdown 文档，支持粘贴或文件输入。适用于任意领域的知识库构建。

---

## 执行前必读

**必须先读取** [transformation-rules.md](transformation-rules.md)（与 SKILL.md 同目录），按其中五准则执行转换，并在完成后执行检查清单。

---

## 内容过短校验

**触发时机**：仅在即将执行内容转换时触发（有配置→工作流程、选 B→B 路径）。选 A 创建配置时**不触发**，允许用户无内容时仅完成配置。

**检查规则**：若待转换内容少于 100 字，提示「内容过短，建议补充后再转换」并停止。

---

## 配置检测

**优先检查当前项目是否存在** `.cursor/knowledge-base-config.md`。

### 有配置时

读取配置中的「模块列表」和「文件命名规则」，用于分类推荐和命名建议。

### 无配置时

向用户呈现以下选项，使用以下话术：

> 检测到当前项目暂无知识库配置。您可以选择：
>
> **A. 创建配置（推荐）**
>
> 有了配置后，每次转换新内容时，您可以获得：
> - **自动分类推荐**：根据内容主题，智能判断应放入哪个模块，无需每次手动纠结「该放哪里」
> - **智能命名建议**：按您项目的既有规范生成文件名，保持知识库风格统一
> - **一次配置，长期使用**：配置完成后，后续所有转换都会自动享受上述能力，无需重复设置
>
> 适合：正在构建或维护知识库，希望新内容能自动归位、命名规范。
>
> **B. 仅内容规范化**
>
> 不创建配置，直接按规范转换内容，并在原文件旁生成「源文件名-知识库版.md」。
> 适合：当前并非知识库项目，仅需对单份内容做结构规范化处理。
>
> 请选择 A 或 B：

**若用户选 A**：进入配置创建流程。  
**若用户选 B**：进入 B 路径（仅内容规范化）。

---

## 配置创建

**目标**：生成包含「模块列表」和「文件命名规则」的 knowledge-base-config.md，以支持后续的分类推荐和命名建议。

**可选手段**：
- 扫描项目结构，尝试推断模块和命名规则
- 向用户询问
- 结合扫描与询问

**原则**：以结果为导向，灵活选择交互方式，直至获得必要信息。不写死交互步骤，根据实际情况决定如何与用户确认。即使无法扫描，仅通过询问也可完成配置。

**从零搭建知识库**：当扫描发现项目无结构或结构很少时，进入「设计模式」，通过询问用户完成配置。例如：「您希望知识库有哪些模块？可按主题、类型或工作流程划分」「您希望文件如何命名？例如 序号-主题.md、日期-主题.md 或 主题.md」。用户描述期望结构后，据此生成配置。Skill 支持从零开始设计知识库架构。

**输出**：用户确认后，写入 `.cursor/knowledge-base-config.md`。

**配置创建完成后的后续流程**：
- **若用户本次调用时已提供待转换内容**：配置创建完成后，立即进入「工作流程（有配置时）」执行转换。
- **若用户本次调用时未提供内容**：配置创建完成后结束，告知用户可下次提供内容并再次调用。

---

## 配置格式

配置文件 `.cursor/knowledge-base-config.md` 结构如下。Agent 解析时：根据内容主题与各模块的「分类依据」进行匹配，选择最相符的模块；文件命名规则为模板说明。

```markdown
# 知识库配置

## 模块列表

| 序号 | 路径 | 分类依据 |
|------|------|----------|
| 01 | 01_技术文档/ | 技术原理、实现方法、代码示例 |
| 02 | 02_产品文档/ | 产品方案、需求说明、用户故事 |
| - | 待整理/ | 未分类、待归档 |

## 文件命名

- **格式**：`序号-主题.md`（如 06-React-Hooks 实践.md）
- **序号规则**：按目标模块内现有文档数量递增
```

---

## 工作流程（有配置时）

### 1. 接收输入

- **粘贴内容**：直接使用用户输入框中的文本
- **文件路径**：通过 `@file:path` 或用户指定路径读取文件内容

### 2. 执行转换

1. 读取 [transformation-rules.md](transformation-rules.md)
2. 按五准则对原文进行转换
3. 按 transformation-rules 中的检查清单逐项核对

### 3. 分类与命名（依赖配置）

- 根据配置中的**模块列表**，分析内容主体，判断所属模块
- 根据配置中的**文件命名规则**，生成建议文件名。若配置要求按序号命名，需扫描目标模块目录以确定下一序号
- 跨多模块时，归入主体内容所在模块
- 难以判断时，给出 2 个候选并说明理由，由用户选择

### 4. 输出格式

```markdown
## 转换结果

[完整转换后的 Markdown 内容]

---

## 建议保存

- **路径**：`模块路径/建议文件名.md`
- **理由**：[1-2 句说明为何归入该模块]
```

### 5. 写入文件

- **用户接受建议路径时**：按建议路径（模块路径/建议文件名）写入。若目标目录不存在，先创建父目录再写入。**粘贴输入与文件输入均支持**：接受建议路径后均按路径写入。
- **用户拒绝建议路径时**：询问用户期望的路径和文件名，按用户指定写入。若目标目录不存在，先创建父目录再写入。

---

## B 路径（无配置且用户选 B 时）

- 读取 [transformation-rules.md](transformation-rules.md)，按五准则执行转换
- 若输入为文件：在原文件同目录生成 `原文件名-知识库版.md`，写入转换后的完整内容
- 若输入为粘贴：输出转换后的 Markdown，由用户自行保存（B 路径不提供分类与命名建议，故不写入文件）
- 不提供分类推荐、命名建议，不涉及配置

---

## 异常处理

| 情况 | 处理 |
|------|------|
| 内容过短（< 100 字） | 提示补充后再转换 |
| 分类模糊 | 给出 2 个候选，由用户选择 |
| 用户拒绝建议 | 询问用户指定路径和文件名 |
| 输入文件无法读取 | 提示错误原因，建议检查路径或粘贴内容 |
| 配置格式异常 | 提示用户检查配置，或建议重新创建 |
