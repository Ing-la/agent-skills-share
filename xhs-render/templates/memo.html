<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* xhs-page-bg: #faf6f0 */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      width: 1242px;
      height: 1660px;
      font-family: "PingFang SC", "Source Han Sans SC", "Microsoft YaHei", sans-serif;
      background-color: #faf6f0;
      background-image: radial-gradient(circle, #a89888 1.5px, transparent 1.5px);
      background-size: 24px 24px;
      padding: 56px 72px 72px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .memo-body {
      flex: 1;
      min-height: 0;
      width: 720px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-y: auto;
    }
    /* Cover: 备忘录标题区 */
    body.role-cover .memo-body { text-align: center; }
    .memo-meta {
      font-size: 26px;
      color: #999;
      letter-spacing: 0.08em;
      margin-bottom: 24px;
    }
    body.role-cover .memo-meta { display: block; }
    body.role-cover .memo-meta::before { content: "— 笔 记 —"; }
    body.role-content .memo-meta,
    body.role-ending .memo-meta { display: none; }
    .memo-tag {
      display: flex;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(0,0,0,0.08);
    }
    body.role-cover .memo-tag,
    body.role-ending .memo-tag { justify-content: center; border-bottom: none; margin-bottom: 28px; padding-bottom: 0; }
    .tag-title {
      font-size: 40px;
      font-weight: 700;
      color: #1a1a1a;
      letter-spacing: 0.02em;
    }
    body.role-cover .tag-title { font-size: 48px; }
    body.role-ending .tag-title { font-size: 36px; }
    .tag-title:empty { display: none; }
    .memo-tag:has(.tag-title:empty) { display: none; }
    .content {
      font-size: 34px;
      line-height: 1.85;
      color: #333;
      letter-spacing: 0.02em;
      white-space: pre-wrap;
      word-break: break-word;
    }
    body.role-cover .content { font-size: 36px; color: #2a2a2a; }
    .memo-line {
      margin-bottom: 20px;
      padding-left: 28px;
      position: relative;
    }
    .memo-line::before {
      content: "●";
      position: absolute;
      left: 0;
      color: #333;
      font-size: 24px;
      top: 4px;
    }
  </style>
</head>
<body class="role-{{role}}">
  <div class="memo-body">
    <div class="memo-meta"></div>
    {{EMOJI_BLOCK}}
    <div class="memo-tag">
      <span class="tag-title">{{title}}</span>
    </div>
    <div class="content" id="memo-content">{{content}}</div>
  </div>
  <script>
    (function() {
      var el = document.getElementById('memo-content');
      if (!el) return;
      var role = document.body.className;
      /* 仅对 content 块做段落转 bullets */
      if (role.indexOf('role-content') >= 0 && el.textContent.trim()) {
        var text = el.innerHTML.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        var paras = text.split(/\n\n+/);
        el.innerHTML = paras.map(function(p) {
          return '<div class="memo-line">' + p.replace(/\n/g, '<br>') + '</div>';
        }).join('');
      }
    })();
  </script>
</body>
</html>
